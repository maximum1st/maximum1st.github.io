<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダウンフォースを考慮した高度な車高調整シミュレーター</title>
    <style>
        input[type=number] {
            width: 80px;
        }
    </style>
</head>
<body>
    <h1>ダウンフォースを考慮した高度な車高調整シミュレーター</h1>
    <p>
        総重量: <input type="number" id="totalWeight" value="1500"> kg<br>
        前輪重量配分 (%): <input type="number" id="frontWeightDistribution" value="50"> %<br>
        前輪の初期車高: <input type="number" id="frontInitialHeight" value="150"> mm<br>
        後輪の初期車高: <input type="number" id="rearInitialHeight" value="150"> mm<br>
        前輪のスプリングレート: <input type="number" id="frontSpringRate" value="5"> N/mm<br>
        後輪のスプリングレート: <input type="number" id="rearSpringRate" value="5"> N/mm<br>
        前輪のダウンフォース: <input type="number" id="frontDownforce" value="100"> N<br>
        後輪のダウンフォース: <input type="number" id="rearDownforce" value="100"> N<br>
        タイヤの種類:
        <select id="tireType">
            <option value="1.0">コンフォートハード</option>
            <option value="1.1">コンフォートミディアム</option>
            <option value="1.2">コンフォートソフト</option>
            <option value="1.3">スポーツハード</option>
            <option value="1.4">スポーツミディアム</option>
            <option value="1.5">スポーツソフト</option>
            <option value="1.6">レーシングハード</option>
            <option value="1.7">レーシングミディアム</option>
            <option value="1.8">レーシングソフト</option>
        </select>
        <button onclick="calculateOptimalHeight()">最適車高を計算</button>
    </p>
    <p id="result"></p>
    <script>
    function calculateOptimalHeight() {
        const totalWeight = parseFloat(document.getElementById("totalWeight").value);
        const frontWeightDistribution = parseFloat(document.getElementById("frontWeightDistribution").value) / 100;
        const frontInitialHeight = parseFloat(document.getElementById("frontInitialHeight").value);
        const rearInitialHeight = parseFloat(document.getElementById("rearInitialHeight").value);
        const frontSpringRate = parseFloat(document.getElementById("frontSpringRate").value);
        const rearSpringRate = parseFloat(document.getElementById("rearSpringRate").value);
const frontDownforce = parseFloat(document.getElementById("frontDownforce").value);
const rearDownforce = parseFloat(document.getElementById("rearDownforce").value);
const tireType = parseFloat(document.getElementById("tireType").value);
                const frontWeight = totalWeight * frontWeightDistribution;
        const rearWeight = totalWeight * (1 - frontWeightDistribution);

        const frontEffectiveWeight = frontWeight + frontDownforce / 9.81;
        const rearEffectiveWeight = rearWeight + rearDownforce / 9.81;

        const frontCompression = frontEffectiveWeight / 2 * 9.81 / frontSpringRate;
        const rearCompression = rearEffectiveWeight / 2 * 9.81 / rearSpringRate;

        const frontOptimalHeight = frontInitialHeight - frontCompression;
        const rearOptimalHeight = rearInitialHeight - rearCompression;

        const optimalHeight = {
            front: frontOptimalHeight * tireType,
            rear: rearOptimalHeight * tireType
        };

        document.getElementById("result").innerHTML = `最適な車高:<br>前輪: ${optimalHeight.front.toFixed(2)} mm<br>後輪: ${optimalHeight.rear.toFixed(2)} mm`;
    }
</script>
</body>
</html>
