<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>レーシングサスペンション計算</title>
    <style>
        .form-container {
            display: flex;
            flex-direction: column;
            max-width: 50px;
            margin: 0 auto;
        }
        input, select, button {
            max-width: 100%;
        }
    </style>
    <script>
        function calculateSuspension() {
            const engineWeight = getEngineWeight();
            const frontWeight = parseFloat(document.getElementById("frontWeight").value);
            const rearWeight = parseFloat(document.getElementById("rearWeight").value);
            const frontSpringFreq = parseFloat(document.getElementById("frontSpringFreq").value);
            const rearSpringFreq = parseFloat(document.getElementById("rearSpringFreq").value);
            const frontCurrentHeight = parseFloat(document.getElementById("frontCurrentHeight").value);
            const rearCurrentHeight = parseFloat(document.getElementById("rearCurrentHeight").value);
            const frontMinHeight = parseFloat(document.getElementById("frontMinHeight").value);
            const frontMaxHeight = parseFloat(document.getElementById("frontMaxHeight").value);
            const rearMinHeight = parseFloat(document.getElementById("rearMinHeight").value);
            const rearMaxHeight = parseFloat(document.getElementById("rearMaxHeight").value);

            const nurburgringFactor = 0.8;
            const tsukubaFactor = 0.9;

            const frontSpringRate = (Math.pow((frontSpringFreq * 2 * Math.PI), 2)) * (frontWeight + engineWeight);
            const rearSpringRate = (Math.pow((rearSpringFreq * 2 * Math.PI), 2)) * (rearWeight + engineWeight);

            const engineWeightFactor = 0.02;
            const frontOptimalHeight = (frontMinHeight + frontMaxHeight) / 2 + (engineWeight * engineWeightFactor);
            const rearOptimalHeight = (rearMinHeight + rearMaxHeight) / 2 - (engineWeight * engineWeightFactor);

            const frontOptimalHeightNurburgring = Math.max(frontCurrentHeight * nurburgringFactor, frontMinHeight) + (engineWeight * engineWeightFactor);
            const rearOptimalHeightNurburgring = Math.max(rearCurrentHeight * nurburgringFactor, rearMinHeight) - (engineWeight * engineWeightFactor);

            const frontOptimalHeightTsukuba = Math.max(frontCurrentHeight * tsukubaFactor, frontMinHeight) + (engineWeight * engineWeightFactor);
            const rearOptimalHeightTsukuba = Math.max(rearCurrentHeight * tsukubaFactor, rearMinHeight) - (engineWeight * engineWeightFactor);

            document.getElementById("engineWeightDisplay").innerText = engineWeight.toFixed(2);
            document.getElementById("frontSpringRate").innerText = frontSpringRate.toFixed(2);
            document.getElementById("rearSpringRate").innerText = rearSpringRate.toFixed(2);
            document.getElementById("frontOptimalHeightStreet").innerText = frontOptimalHeight.toFixed(2);
            document.getElementById("rearOptimalHeightStreet").innerText = rearOptimalHeight.toFixed(2);
            document.getElementById("frontOptimalHeightNurburgring").innerText = frontOptimalHeightNurburgring.toFixed(2);
            document.getElementById("rearOptimalHeightNurburgring").innerText = rearOptimalHeightNurburgring.toFixed(2);
                        document.getElementById("frontOptimalHeightTsukuba").innerText = frontOptimalHeightTsukuba.toFixed(2);
            document.getElementById("rearOptimalHeightTsukuba").innerText = rearOptimalHeightTsukuba.toFixed(2);
        }

        function getEngineWeight() {
            const engineType = document.getElementById("engineType").value;
            let engineWeight;

            switch (engineType) {
                case "NA":
                    engineWeight = 150;
                    break;
                case "Turbo":
                    engineWeight = 200;
                    break;
                case "Supercharged":
                    engineWeight = 220;
                    break;
                case "V12":
                    engineWeight = 250;
                    break;
                default:
                    engineWeight = 150;
            }
            return engineWeight;
        }
    </script>
</head>
<body>
    <h1>レーシングサスペンション計算</h1>
    <div class="form-container">
        <label for="engineType">エンジンタイプ:</label>
        <select id="engineType">
            <option value="NA">NA</option>
            <option value="Turbo">Turbo</option>
            <option value="Supercharged">Supercharged</option>
            <option value="V12">V12</option>
        </select>
        <p>エンジン重量: <span id="engineWeightDisplay">150</span> kg</p>
        <label for="frontWeight">フロント重量 (kg):</label>
        <input id="frontWeight" type="number" step="0.01">
        <label for="rearWeight">リア重量 (kg):</label>
        <input id="rearWeight" type="number" step="0.01">
        <label for="frontSpringFreq">フロントスプリング周波数 (Hz):</label>
        <input id="frontSpringFreq" type="number" step="0.01">
        <label for="rearSpringFreq">リアスプリング周波数 (Hz):</label>
        <input id="rearSpringFreq" type="number" step="0.01">
        <label for="frontCurrentHeight">現在のフロント車高 (mm):</label>
        <input id="frontCurrentHeight" type="number" step="0.01">
        <label for="rearCurrentHeight">現在のリア車高 (mm):</label>
        <input id="rearCurrentHeight" type="number" step="0.01">
        <label for="frontMinHeight">フロント最小車高 (mm):</label>
        <input id="frontMinHeight" type="number" step="0.01">
        <label for="frontMaxHeight">フロント最大車高 (mm):</label>
        <input id="frontMaxHeight" type="number" step="0.01">
        <label for="rearMinHeight">リア最小車高 (mm):</label>
        <input id="rearMinHeight" type="number" step="0.01">
        <label for="rearMaxHeight">リア最大車高 (mm):</label>
                <input id="rearMaxHeight" type="number" step="0.01">
        <button onclick="calculateSuspension()">計算</button>
    </div>
    <h2>結果</h2>
    <table>
        <tr>
            <th></th>
            <th>フロント</th>
            <th>リア</th>
        </tr>
        <tr>
            <td>スプリングレート (N/m)</td>
            <td id="frontSpringRate">-</td>
            <td id="rearSpringRate">-</td>
        </tr>
        <tr>
            <td>最適車高 (通常走行) (mm)</td>
            <td id="frontOptimalHeightStreet">-</td>
            <td id="rearOptimalHeightStreet">-</td>
        </tr>
        <tr>
            <td>最適車高 (ニュルブルクリンク) (mm)</td>
            <td id="frontOptimalHeightNurburgring">-</td>
            <td id="rearOptimalHeightNurburgring">-</td>
        </tr>
        <tr>
            <td>最適車高 (筑波サーキット) (mm)</td>
            <td id="frontOptimalHeightTsukuba">-</td>
            <td id="rearOptimalHeightTsukuba">-</td>
        </tr>
    </table>
</body>
</html>




